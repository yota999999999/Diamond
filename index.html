<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Peti Game</title>

<style>
body{
    margin:0;
    font-family:'Segoe UI', sans-serif;
    background:radial-gradient(circle at top, #1a1a2e, #000);
    display:flex;
    flex-direction:column;
    justify-content:center;
    align-items:center;
    height:100vh;
    overflow:hidden;
    color:white;
}

.container{
    display:flex;
    gap:22px;
    margin-bottom:25px;
}

.peti-wrapper{
    display:flex;
    flex-direction:column;
    align-items:center;
}

.nomor{
    margin-bottom:8px;
    font-weight:bold;
    font-size:20px;
    background:linear-gradient(45deg,#ffd700,#ffae00);
    padding:4px 12px;
    border-radius:20px;
    box-shadow:0 0 10px gold;
    animation:pulse 1.5s infinite alternate;
}

@keyframes pulse{
    from{ transform:scale(1); }
    to{ transform:scale(1.1); }
}

.peti{
    width:90px;
    height:90px;
    perspective:1000px;
    cursor:pointer;
    animation: idleFloat 2.4s ease-in-out infinite;
    transition: transform .2s;
}
.peti:hover{
    transform:scale(1.1);
}

.peti-inner{
    width:100%;
    height:100%;
    position:relative;
    transform-style:preserve-3d;
    transition:transform .6s;
}
.peti.terbuka .peti-inner{ transform:rotateY(180deg); }

.peti-front,.peti-back{
    position:absolute;
    width:100%;
    height:100%;
    backface-visibility:hidden;
    border-radius:14px;
    display:flex;
    justify-content:center;
    align-items:center;
}

/* ðŸ”¥ DIHILANGKAN BACKGROUND KOTAK */
.peti-front{
    background:none;
    box-shadow:none;
}

.peti-front img{
    width:100%;
    height:100%;
    object-fit:contain;
}

.peti-back{
    background:none;
    transform:rotateY(180deg);
}

.peti.harta .peti-back{
    box-shadow:0 0 25px gold;
}

@keyframes idleFloat{
    0%,100%{ transform:translateY(0) }
    50%{ transform:translateY(-12px) }
}

button{
    padding:12px 28px;
    background:linear-gradient(45deg,#ff416c,#ff4b2b);
    color:white;
    border:none;
    border-radius:8px;
    cursor:pointer;
    font-weight:bold;
    letter-spacing:1px;
    box-shadow:0 0 15px rgba(255,75,43,.6);
    transition:.2s;
}
button:hover{
    transform:scale(1.08);
}
</style>
</head>

<body>

<div class="container">

    <div class="peti-wrapper">
        <div class="nomor">1</div>
        <div class="peti" onclick="bukaPeti(0)">
            <div class="peti-inner">
                <div class="peti-front"><img src="peti.png"></div>
                <div class="peti-back"></div>
            </div>
        </div>
    </div>

    <div class="peti-wrapper">
        <div class="nomor">2</div>
        <div class="peti" onclick="bukaPeti(1)">
            <div class="peti-inner">
                <div class="peti-front"><img src="peti.png"></div>
                <div class="peti-back"></div>
            </div>
        </div>
    </div>

    <div class="peti-wrapper">
        <div class="nomor">3</div>
        <div class="peti" onclick="bukaPeti(2)">
            <div class="peti-inner">
                <div class="peti-front"><img src="peti.png"></div>
                <div class="peti-back"></div>
            </div>
        </div>
    </div>

    <div class="peti-wrapper">
        <div class="nomor">4</div>
        <div class="peti" onclick="bukaPeti(3)">
            <div class="peti-inner">
                <div class="peti-front"><img src="peti.png"></div>
                <div class="peti-back"></div>
            </div>
        </div>
    </div>

    <div class="peti-wrapper">
        <div class="nomor">5</div>
        <div class="peti" onclick="bukaPeti(4)">
            <div class="peti-inner">
                <div class="peti-front"><img src="peti.png"></div>
                <div class="peti-back"></div>
            </div>
        </div>
    </div>

</div>

<button onclick="resetGame()">ULANG</button>

<audio id="soundSCTB" src="mitos1.mp3"></audio>
<audio id="soundRuby" src="jp.mp3"></audio>

<script>
let hadiah = Array(5).fill(null);
let klikKe = 0;

const soundSCTB = document.getElementById("soundSCTB");
const soundRuby = document.getElementById("soundRuby");

function acakArray(arr){
    return arr.sort(()=>Math.random()-0.5);
}

function bukaPeti(index){
    const peti = document.querySelectorAll('.peti');
    const back = peti[index].querySelector('.peti-back');

    if(peti[index].classList.contains('terbuka')) return;

    peti[index].classList.add('terbuka');
    klikKe++;

    setTimeout(()=>{

        if(klikKe === 1){
            const semuaHadiah = [
                {type:'sctb', img:'sc_tb.png'},
                {type:'sctb', img:'sc_tb.png'},
                {type:'sctb', img:'sc_tb.png'},
                {type:'sctb', img:'sc_tb.png'},
                {type:'ruby', img:'rubydino.png'}
            ];

            hadiah[index] = {type:'sctb', img:'sc_tb.png'};
            semuaHadiah.splice(0,1);
            acakArray(semuaHadiah);

            peti.forEach((p,i)=>{
                if(i !== index){
                    hadiah[i] = semuaHadiah.pop();
                }
            });

            tampilkanHadiah(hadiah[index], back, peti[index]);
            return;
        }

        tampilkanHadiah(hadiah[index], back, peti[index]);

    },350);
}

function tampilkanHadiah(h, back, peti){
    back.innerHTML = `<img src="${h.img}" width="65">`;
    peti.classList.add('harta');

    if(h.type === 'sctb'){
        soundSCTB.currentTime = 0;
        soundSCTB.play();
    }

    if(h.type === 'ruby'){
        soundRuby.currentTime = 0;
        soundRuby.play();

        const flash = document.createElement('div');
        flash.style.position = "fixed";
        flash.style.inset = "0";
        flash.style.background = "radial-gradient(circle, rgba(255,0,0,.6), transparent 60%)";
        flash.style.pointerEvents = "none";
        document.body.appendChild(flash);
        setTimeout(()=>flash.remove(),600);
    }
}

function resetGame(){
    const peti = document.querySelectorAll('.peti');
    hadiah = Array(5).fill(null);
    klikKe = 0;

    peti.forEach(p=>{
        p.classList.remove('terbuka','harta');
        p.querySelector('.peti-back').innerHTML = '';
    });
}
</script>

</body>
</html>
